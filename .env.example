# fluxsolutions runtime mode
NODE_ENV=production
LOG_LEVEL=info

# Public URLs and domains
APP_BASE_URL=https://fluxsolutions.ru
WEB_BASE_URL=https://fluxsolutions.ru
# Recommended for VPS + nginx deployment in this repo:
# use same-origin API through nginx proxy `/api` to avoid CORS/cookie drift.
NEXT_PUBLIC_API_BASE_URL=/api
# CDN toggle:
# true  -> presigned URLs are generated for S3_PUBLIC_ENDPOINT (CDN edge endpoint)
# false -> presigned URLs are generated for S3_ORIGIN_PUBLIC_ENDPOINT (direct origin, no CDN)
ENABLE_CDN=true
S3_PUBLIC_ENDPOINT=https://cdn.fluxsolutions.ru
# Required in production when ENABLE_CDN=false (example: direct files host on your VPS/nginx).
# For local docker dev you can use: http://localhost:9000
S3_ORIGIN_PUBLIC_ENDPOINT=https://files.fluxsolutions.ru
CORS_ORIGIN=https://fluxsolutions.ru,http://fluxsolutions.ru,https://api.fluxsolutions.ru,http://api.fluxsolutions.ru

# API network binding
HOST=0.0.0.0
PORT=4000

# Database
POSTGRES_DB=fluxsolutions
POSTGRES_USER=fluxsolutions
POSTGRES_PASSWORD=CHANGE_ME_STRONG_DB_PASSWORD
DATABASE_URL=postgresql://fluxsolutions:CHANGE_ME_STRONG_DB_PASSWORD@localhost:5432/fluxsolutions?schema=public

# JWT and auth secrets (generate with: openssl rand -hex 32)
JWT_ACCESS_SECRET=CHANGE_ME_64_HEX_MIN
JWT_REFRESH_SECRET=CHANGE_ME_64_HEX_MIN
JWT_SHARE_SECRET=CHANGE_ME_64_HEX_MIN
ACCESS_TOKEN_TTL_SECONDS=900
REFRESH_TOKEN_TTL_DAYS=30
SHARE_VERIFICATION_TTL_SECONDS=600
COOKIE_DOMAIN=.fluxsolutions.ru
COOKIE_SECURE=true

# Optional bootstrap admin
ADMIN_EMAIL=admin@fluxsolutions.ru
ADMIN_PASSWORD=CHANGE_ME_STRONG_ADMIN_PASSWORD

# MinIO / S3
MINIO_ROOT_USER=fluxsolutions_minio
MINIO_ROOT_PASSWORD=CHANGE_ME_STRONG_MINIO_PASSWORD
# Optional explicit S3 credentials for API local run (if omitted, MINIO_ROOT_* are used)
# S3_ACCESS_KEY=fluxsolutions_minio
# S3_SECRET_KEY=CHANGE_ME_STRONG_MINIO_PASSWORD
S3_REGION=us-east-1
S3_BUCKET=fluxsolutions-files
S3_FORCE_PATH_STYLE=true
PRESIGNED_URL_EXPIRES_SECONDS=900

# Upload policy
MAX_FILE_SIZE_BYTES=1073741824
MULTIPART_PART_SIZE_BYTES=8388608
ALLOWED_MIME_TYPES=application/pdf,image/png,image/jpeg,image/webp,text/plain,application/zip,application/x-zip-compressed,application/json,video/mp4

# Rate limiting
RATE_LIMIT_MAX=150
RATE_LIMIT_WINDOW=1 minute

# Observability
ENABLE_METRICS=true

# Optional ClamAV
ENABLE_CLAMAV=false
CLAMAV_HOST=fluxsolutions-clamav
CLAMAV_PORT=3310

# Optional SMTP (if omitted, reset links are logged in API output)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=no-reply@fluxsolutions.ru

# Test helper
SKIP_STARTUP_CHECKS=false
